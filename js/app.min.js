const elSelectsBox=document.querySelector(".selects__box"),elCounterSelect=document.querySelector(".counter__select"),elSelection=document.querySelector(".select"),elScore=document.querySelector(".score"),elPlayStatusBox=document.querySelector(".play__status");let elAnswerText=document.querySelector(".answer__txt"),rand=Math.floor(20*Math.random())+1;const thirtySings=array.slice(rand,22),fiftySings=array.slice(rand,77),ninethySings=array.slice(rand,90),elStartPage=document.querySelector("#mainblock"),elForm=document.querySelector(".selectsForm"),elDataList=document.querySelector(".data__list"),elDataListFragment=document.createDocumentFragment(),elAudio=document.querySelector(".audio"),musics=["../music/lean.mp3","../music/name.mp3","../music/riders.mp3"];let elVideo=document.querySelector("#vid"),elConfetti=document.querySelector("#canvas");const elScoreUp=document.querySelector(".scoreUp"),elCar=document.querySelector(".carr"),elModal=document.querySelector(".modall"),elOverlay=document.querySelector("#overlay"),elMusicBtn=document.querySelector(".music-btn"),elWrongScore=document.querySelector(".wrong"),elWrongLabel=document.querySelector(".wrong-answer"),elModalTitle=document.querySelector(".modal-tittle");let wrongAnswer=0,score=0;const answersList=[];let timer;const elApplause=document.querySelector(".applause");let evt=new Event("click");function useState(e){let t=e;function n(e){t=e}function l(){return t}return[l,n]}let[selectedSings,setSelectedSings]=useState(thirtySings);function RandomBySelectValue(e){return e.forEach(e=>{answersList.includes(e.name)||answersList.push(e.name)})}const randomMusics=()=>{let e=Math.floor(Math.random()*musics.length),t=musics[e];musics.forEach(e=>{elAudio.src=t,elAudio.play()})};function randd(){let e=answersList[Math.floor(Math.random()*answersList.length)];!0===answersList.includes(e)&&(elAnswerText.innerHTML=e,elAnswerText.classList.add("mb-5","p-2","rounded","sticky-top","fs-3"))}function showSings(e){for(i=0;i<e.length;i++){let t=document.createElement("li");t.classList.add("data__item"),t.dataset.name=e[i].name,t.style.backgroundImage=`url(${e[i].arrayImg})`,t.style.cursor="pointer",t.classList.add("positoin-relative"),elDataListFragment.appendChild(t),elDataList.appendChild(elDataListFragment)}}function sortingAllSings(){"thirty"===elSelection.value&&(setSelectedSings(thirtySings),showSings(thirtySings)),"fifty"===elSelection.value?(setSelectedSings(fiftySings),showSings(fiftySings)):"ninethy"===elSelection.value&&(setSelectedSings(ninethySings),showSings(ninethySings))}let value=180;function countdownShow(){let e=Math.floor(--value/60),t=Math.floor(value%60),n=document.querySelector(".minute"),l=document.querySelector(".seconds");elScore.innerHTML=`Your score: ${score}`,elScore.classList.add("mb-4"),value>=0&&(n.innerHTML=formatTime(e)+" :",l.innerHTML=formatTime(t)),0===value&&(elModalTitle.textContent="TIMEOUT!",elModal.classList.remove("d-none"),elOverlay.classList.remove("d-none"))}function formatTime(e){return e<10?`0${e}`:e}function counterSelectValue(){"180"===elCounterSelect.value?startCountDownTimer():"300"===elCounterSelect.value?(value=300,startCountDownTimer()):(value=540,startCountDownTimer())}function generateNextStep(e,t){elAnswerText.innerHTML="",answersList.splice(e,1),t.splice(e,1),elDataList.innerHTML="",showSings(t),RandomBySelectValue(t),randd()}startCountDownTimer=()=>{timer=setInterval(countdownShow,1e3)},window.addEventListener("DOMContentLoaded",()=>{randomMusics()}),elForm.addEventListener("submit",e=>{e.preventDefault(),elCar.classList.add("carDrive"),setTimeout(()=>{randomMusics(),elStartPage.classList.add("d-none"),elSelectsBox.classList.toggle("d-none"),elPlayStatusBox.classList.toggle("pt-4"),sortingAllSings(array),counterSelectValue();let e=document.querySelector(".data__item");elAnswerText.innerHTML=e.getAttribute("data-name"),elAnswerText.classList.add("my-5","p-2","rounded","sticky-top","fs-3","fw-medium"),elMusicBtn.classList.remove("d-none"),elWrongLabel.classList.remove("d-none")},1500)}),elDataList.addEventListener("click",e=>{e.preventDefault();let t=selectedSings(),n=e.target.dataset.name;if(setTimeout(()=>{elDataList.classList.remove("shake")},1700),n===elAnswerText.innerHTML){let l=t.findIndex(e=>e.name===n);score+=2,elScoreUp.classList.add("scoreAnimation"),setTimeout(()=>{elScoreUp.classList.remove("scoreAnimation")},1500),"thirty"===elSelection.value?generateNextStep(l,thirtySings):"fifty"===elSelection.value?generateNextStep(l,fiftySings):"ninethy"===elSelection.value&&generateNextStep(l,ninethySings)}else n!==elAnswerText.innerHTML&&(elDataList.classList.add("shake"),wrongAnswer+=1,elWrongScore.innerHTML=wrongAnswer);5==wrongAnswer?(clearInterval(timer),elModalTitle.textContent="GAME OVER!",elModal.classList.remove("d-none"),elOverlay.classList.remove("d-none")):""===elAnswerText.innerHTML&&(clearInterval(timer),elConfetti.style.display="block",initConfetti(),render(),elApplause.play(),elModalTitle.textContent="CONGRATULATIONS! YOU WIN!!",elModal.classList.remove("d-none"))}),elMusicBtn.addEventListener("click",()=>{elMusicBtn.classList.contains("btn-warning")?(elAudio.muted=!0,elMusicBtn.classList.toggle("btn-warning")):(elMusicBtn.classList.toggle("btn-warning"),elAudio.muted=!1)}),elModal.addEventListener("click",e=>{e.target.classList.contains("main")&&window.location.reload()});let ctx=canvas.getContext("2d");canvas.width=window.innerWidth,canvas.height=window.innerHeight;let cx=ctx.canvas.width/2,cy=ctx.canvas.height/2,confetti=[];const confettiCount=300,gravity=.5,terminalVelocity=5,drag=.075,colors=[{front:"red",back:"darkred"},{front:"green",back:"darkgreen"},{front:"blue",back:"darkblue"},{front:"yellow",back:"darkyellow"},{front:"orange",back:"darkorange"},{front:"pink",back:"darkpink"},{front:"purple",back:"darkpurple"},{front:"turquoise",back:"darkturquoise"}],resizeCanvas=()=>{canvas.width=window.innerWidth,canvas.height=window.innerHeight,cx=ctx.canvas.width/2,cy=ctx.canvas.height/2},randomRange=(e,t)=>Math.random()*(t-e)+e,initConfetti=()=>{for(let e=0;e<300;e++)confetti.push({color:colors[Math.floor(randomRange(0,colors.length))],dimensions:{x:randomRange(10,20),y:randomRange(10,30)},position:{x:randomRange(0,canvas.width),y:canvas.height-1},rotation:randomRange(0,2*Math.PI),scale:{x:1,y:1},velocity:{x:randomRange(-25,25),y:randomRange(0,-50)}})},render=()=>{ctx.clearRect(0,0,canvas.width,canvas.height),confetti.forEach((e,t)=>{let n=e.dimensions.x*e.scale.x,l=e.dimensions.y*e.scale.y;ctx.translate(e.position.x,e.position.y),ctx.rotate(e.rotation),e.velocity.x-=.075*e.velocity.x,e.velocity.y=Math.min(e.velocity.y+.5,5),e.velocity.x+=Math.random()>.5?Math.random():-Math.random(),e.position.x+=e.velocity.x,e.position.y+=e.velocity.y,e.position.y>=canvas.height&&confetti.splice(t,1),e.position.x>canvas.width&&(e.position.x=0),e.position.x<0&&(e.position.x=canvas.width),e.scale.y=Math.cos(.1*e.position.y),ctx.fillStyle=e.scale.y>0?e.color.front:e.color.back,ctx.fillRect(-n/2,-l/2,n,l),ctx.setTransform(1,0,0,1,0,0)}),confetti.length<=10&&initConfetti(),window.requestAnimationFrame(render)};window.addEventListener("resize",function(){resizeCanvas()}),window.addEventListener("click",function(){initConfetti()});